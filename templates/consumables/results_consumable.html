{% extends 'base.html' %}

{% block content %} {% load static %}



<div class="" id="search-results" hx-target="#consumable_results" hx-swap="outerHTML">
    {% if results %}

    <div id="spinner" class="htmx-indicator">
        <h1>Searching....</h1>
    </div>
    <table class="table-fixed w-full shadow-md rounded-lg bg-white text-left">
        <thead class="bg-green-800">
            <tr class="border border-gray-200">
                <th class="p-4 text-white font-bold ">Name</th>
                <th class="p-4 text-white font-bold ">Quantity</th>
                <th class="p-4 text-white font-bold  flex justify-center">Actions</th>
            </tr>
        </thead>

        <tbody class="divide-y-2 divide-gray-500 ">
            {% for consumable in results %}
            <tr class="divide-x divide-gray-100 ">
                <td class="p-4"><a href="{% url 'detail_consumable' consumable.id %}"
                        class="text-green-900 bg-yellow-300 p-2 rounded font-bold">{{consumable.name}}</a></td>
                <td class="p-4">{{consumable.quantity}}</td>

                <td class="p-4 flex justify-center">
                    <div class="flex space-x-3 flex justify-start items-center">
                        <a href="{% url 'checkout_consumable' consumable.id %}"
                            class="bg-green-900 text-yellow-300 p-2 rounded font-semibold hover:bg-green-700">Checkout</a>
                        <a href="{% url 'update_consumable' consumable.id %}"><svg xmlns="http://www.w3.org/2000/svg"
                                class="h-8 w-8 text-green-900 transform transition-all hover:scale-125 hover:rotate-45"
                                fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                <path stroke-linecap="round" stroke-linejoin="round"
                                    d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z" />
                            </svg></a>

                        <a href="{% url 'delete_consumable' consumable.id %}"><svg xmlns="http://www.w3.org/2000/svg"
                                class="h-8 w-8 text-red-900 transform transition-all hover:scale-125 hover:rotate-180"
                                fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                <path stroke-linecap="round" stroke-linejoin="round"
                                    d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" />
                            </svg></a>

                    </div>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>

    {% elif consumables %}


    <div id="spinner" class="htmx-indicator">
        <h1>Searching....</h1>
    </div>

    <table class="table-fixed w-full shadow-md rounded-lg bg-white text-left" hx-confirm="Are you sure?"
        hx-target="#main_page" hx-swap="outerHTML">

        <thead class="bg-green-800">
            <tr class="border border-gray-200">
                <th class="p-4 text-white font-bold ">Name</th>
                <th class="p-4 text-white font-bold ">Quantity</th>
                <th class="p-4 text-white font-bold  flex justify-center">Actions</th>
            </tr>
        </thead>

        <tbody class="divide-y-2 divide-gray-500 ">
            {% for consumable in consumables %}
            <tr class="divide-x divide-gray-100 ">
                <td class="p-4"><a href="{% url 'detail_consumable' consumable.id %}"
                        class="text-green-900 bg-yellow-300 p-2 rounded font-bold">{{consumable.name}}</a></td>
                <td class="p-4">{{consumable.quantity}}</td>

                <td class="p-4 flex justify-center">
                    <div class="flex space-x-3 flex justify-start items-center">
                        <a href="{% url 'checkout_consumable' consumable.id %}"
                            class="bg-green-900 text-yellow-300 p-2 rounded font-semibold hover:bg-green-700">Checkout</a>
                        <a href="{% url 'update_consumable' consumable.id %}"><svg xmlns="http://www.w3.org/2000/svg"
                                class="h-8 w-8 text-green-900 transform transition-all hover:scale-125 hover:rotate-45"
                                fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                <path stroke-linecap="round" stroke-linejoin="round"
                                    d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z" />
                            </svg></a>

                        <a hx-delete="{% url 'delete_consumable' consumable.id %}" class="cursor-pointer"><svg xmlns="http://www.w3.org/2000/svg"
                                class="h-8 w-8 text-red-900 transform transition-all hover:scale-125 hover:rotate-180"
                                fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                <path stroke-linecap="round" stroke-linejoin="round"
                                    d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" />
                            </svg></a>

                    </div>
                </td>
            </tr>
            {% endfor %}
        </tbody>

    </table>

    {% else %}

    <table class="table-fixed w-full shadow-md rounded-lg bg-white text-left">

        <thead class="bg-green-800">
            <tr class="border border-gray-200">
                <th class="p-4 text-white font-bold ">Name</th>
                <th class="p-4 text-white font-bold ">Quantity</th>
                <th class="p-4 text-white font-bold  flex justify-center">Actions</th>
            </tr>
        </thead>

        <tbody class="divide-y-2 divide-gray-500 ">
            {% for consumable in default_view %}
            <tr class="divide-x divide-gray-100 ">
                <td class="p-4"><a href="{% url 'detail_consumable' consumable.id %}"
                        class="text-green-900 bg-yellow-300 p-2 rounded font-bold">{{consumable.name}}</a></td>
                <td class="p-4">{{consumable.quantity}}</td>

                <td class="p-4 flex justify-center">
                    <div class="flex space-x-3 flex justify-start items-center">
                        <a href="{% url 'checkout_consumable' consumable.id %}"
                            class="bg-green-900 text-yellow-300 p-2 rounded font-semibold hover:bg-green-700">Checkout</a>
                        <a href="{% url 'update_consumable' consumable.id %}"><svg xmlns="http://www.w3.org/2000/svg"
                                class="h-8 w-8 text-green-900 transform transition-all hover:scale-125 hover:rotate-45"
                                fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                <path stroke-linecap="round" stroke-linejoin="round"
                                    d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z" />
                            </svg></a>

                        <a href="{% url 'delete_consumable' consumable.id %}"><svg xmlns="http://www.w3.org/2000/svg"
                                class="h-8 w-8 text-red-900 transform transition-all hover:scale-125 hover:rotate-180"
                                fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                <path stroke-linecap="round" stroke-linejoin="round"
                                    d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" />
                            </svg></a>

                    </div>
                </td>
            </tr>
            {% endfor %}
        </tbody>

    </table>
    {% endif %}
</div>
{% endblock content %}